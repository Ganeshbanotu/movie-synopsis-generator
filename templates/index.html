{% extends 'layout.html' %}
{% block title %}Generate Synopsis{% endblock %}
{% block content %}
<h1 class="text-red-600 text-xl">TEST: New version loaded</h1>
<h2 class="text-2xl font-bold mb-4">Generate a Movie Synopsis</h2>
<form method="POST" action="/generate" class="space-y-4">
  <input type="text" name="title" placeholder="Movie Title" required class="w-full p-2 border rounded">

  <select name="genre" class="w-full p-2 border rounded">
    <option value="Action">Action</option>
    <option value="Adventure">Adventure</option>
    <option value="Animation">Animation</option>
    <option value="Comedy">Comedy</option>
    <option value="Crime">Crime</option>
    <option value="Drama">Drama</option>
    <option value="Fantasy">Fantasy</option>
    <option value="Historical">Historical</option>
    <option value="Horror">Horror</option>
    <option value="Musical">Musical</option>
    <option value="Mystery">Mystery</option>
    <option value="Romance">Romance</option>
    <option value="Science Fiction (Sci-Fi)">Science Fiction (Sci-Fi)</option>
    <option value="Thriller">Thriller</option>
    <option value="Western">Western</option>
    <option value="Documentary">Documentary</option>
    <option value="Experimental">Experimental</option>
    <option value="Arthouse/Independent">Arthouse/Independent</option>
  </select>

  <div class="grid grid-cols-2 gap-4">
    <select name="style" class="w-full p-2 border rounded">
      <option value="netflix">Netflix Style</option>
      <option value="classic">Classic Plot</option>
      <option value="logline">Logline</option>
    </select>
    <select name="tone" class="w-full p-2 border rounded">
      <option value="suspenseful">Suspenseful</option>
      <option value="comedic">Comedic</option>
      <option value="romantic">Romantic</option>
      <option value="tragic">Tragic</option>
      <option value="inspirational">Inspirational</option>
      <option value="dark">Dark</option>
      <option value="uplifting">Uplifting</option>
      <option value="mysterious">Mysterious</option>
    </select>
  </div>

  <div class="grid grid-cols-2 gap-4">
    <select name="length" class="w-full p-2 border rounded">
      <option value="short">Short</option>
      <option value="medium">Medium</option>
      <option value="long">Long</option>
    </select>
    <select name="language" class="w-full p-2 border rounded">
      <option value="English">English</option>
      <option value="Hindi">Hindi</option>
      <option value="Telugu">Telugu</option>
      <option value="Tamil">Tamil</option>
      <option value="Kannada">Kannada</option>
      <option value="Malayalam">Malayalam</option>
      <option value="Japanese">Japanese</option>
      <option value="Arabic">Arabic</option>
    </select>
  </div>

  <label class="flex items-center space-x-2">
    <input type="checkbox" name="batch" value="yes">
    <span>Generate 3 versions</span>
  </label>

  <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded">Generate</button>
</form>

{% if generated %}
  {% if generated is string %}
    <div class="mt-8 p-4 border rounded bg-white">
      <h3 class="text-xl font-semibold mb-2">Generated Synopsis:</h3>
      <p class="whitespace-pre-wrap">{{ generated }}</p>
    </div>
  {% else %}
    <div class="mt-8">
      {% for s in generated %}
        <div class="mb-6 p-4 border rounded bg-white">
          <h3 class="text-xl font-semibold mb-2">Generated Version {{ loop.index }}:</h3>
          <p class="whitespace-pre-wrap">{{ s }}</p>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endif %}
{% endblock %}
